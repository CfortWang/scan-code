webpackJsonp([11],{"8YIz":function(t,i,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=s("4kSj"),e=s.n(a),n=s("8wSn"),o={name:"spellBean",i18n:new VueI18n({locale:"spellBean",phone:"",messages:n}),components:{},data:function(){return{rulesOpen:!1,phoneKind:"",groupStatus:"",groupCreateAt:"",groupExpriedAt:"",groupSuccessAt:"",groupStatusDesc:"",groupName:"",shopImage:"",groupSize:"",groupLeftTime:"",pinzhu:"",ownerAvatar:"",pinSuccess:!0,pinFailed:!0,pinIng:!0,shopName:"",groupOnPrice:"",oldPrice:"",discountPrice:"",newPrice:"",startUseTime:"",endUseTime:"",minDistance:"",shopCount:"",shopID:"",groupID:"",payAmount:"",payID:"",payPackageName:"",payShopName:"",payRule:""}},created:function(){var t=this,i=this.$route.query.groupid;console.log(i),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.phoneKind="ios":/(Android)/i.test(navigator.userAgent)&&(this.phoneKind="android"),e()("body").css({"background-color":"#F4F4F4","font-family":"PingFangSC-Regular","font-size":"16px"}),axios({method:"GET",url:"http://dev-new-api.beanpop.cn/myGroupOn/"+i,withCredentials:!0,headers:{lang:"zh",token:"",os:"web",version:"1.0.0",time:"","Content-Type":"application/x-www-form-urlencoded"}}).then(function(i){var s=i.data.data;t.groupName=s.groupName,t.groupCreateAt=s.createdAt,t.groupSuccessAt=s.paidAt,t.groupExpriedAt=s.expriedAt,t.shopName=s.shopName,t.shopImage=s.image,t.groupOnPrice=s.grouponPrice,t.oldPrice=s.price,t.discountPrice=s.discountedPrice,t.newPrice=parseFloat(t.discountPrice-t.groupOnPrice),t.startUseTime=s.startUseTime,t.endUseTime=s.endUseTime,t.groupStatus=s.groupStatus,t.shopID=s.buyerID,t.groupID=s.groupOnId,1==t.groupStatus?(t.groupStatusDesc="拼团成功",t.pinSuccess=!0):2==t.groupStatus?(t.groupStatusDesc="拼豆中...",t.pinSuccess=!1,t.pinIng=!0):(t.groupStatusDesc="拼团失败",t.pinSuccess=!1,t.pinIng=!1),t.groupLeftTime=s.timeLeft,t.groupSize=s.groupSize;for(var a=s.tips,n=0;n<a.length;n++){var o=a[n].title,c=a[n].value;e()(".must-know-contain").append('<div class="must-know-title"></div><div class="must-know-text"></div>'),e()(".must-know-contain .must-know-title:eq("+n+")").text(o),e()(".must-know-contain .must-know-text:eq("+n+")").text(c)}for(var p=s.user,r=0;r<p.length;r++){1==p[r].isOwner&&(t.ownerAvatar=p[r].image,t.pinzhu=p[r].nickname,null!=t.ownerAvatar&&""!=t.ownerAvatar||(t.ownerAvatar="/static/img/share/pindou-wait.png"))}var l=s.nowSize,v='<div class="pindou-partner"><div class="avatar"><img/></div></div>';setTimeout(function(){for(var i=1;i<l;i++){e()(".user-joined").append(v);var s=p[i].image;null==s&&(s="/static/img/share/pindou-wait.png"),e()(".user-joined .avatar:eq("+i+") img").attr("src",s)}for(var a=l;a<t.groupSize;a++){e()(".user-joined").append(v);e()(".user-joined .avatar:eq("+a+") img").attr("src","/static/img/share/pindou-wait.png")}},100);var d=s.shop;t.minDistance=9999999,t.shopCount=d.length,0==t.shopCount&&e()(".min-distance span").text("附近无门店");for(var u=0;u<d.length;u++){e()(".applicative-contain").append('<div class="applicative-shop justified"><div class="applicative-shop-desc"><div class="applicative-shop-name-box justified"><div class="applicative-shop-name"></div><div class="applicative-shop-distance"></div></div><div class="applicative-shop-location"></div></div><div class="applicative-shop-icon"><img src="/static/img/share/position.png"/></div></div>');var m=d[u].name,g=d[u].location,h=d[u].distance;t.minDistance=h<t.minDistance?h:t.minDistance,h>=1e3?h=parseFloat(h/1e3)+"km":h+="m",e()(".applicative-contain .applicative-shop-name:eq("+u+")").text(m),e()(".applicative-contain .applicative-shop-distance:eq("+u+")").text(h),e()(".applicative-contain .applicative-shop-location:eq("+u+")").text(g)}console.log(s)}).catch(function(t){console.log(t)})},methods:{showMustKnow:function(){"none"==e()(".must-know-contain").css("display")?(e()(".must-know-contain").show(),e()(".must-know-icon img").attr("src","/static/img/share/open_hollow.png")):(e()(".must-know-contain").hide(),e()(".must-know-icon img").attr("src","/static/img/share/close_hollow.png"))},showApplicative:function(){this.shopCount>0&&("none"==e()(".applicative-contain").css("display")?(e()(".applicative-contain").show(),e()(".shop-count").show(),e()(".min-distance").hide(),e()(".applicative-icon img").attr("src","/static/img/share/open_hollow.png")):(e()(".applicative-contain").hide(),e()(".shop-count").hide(),e()(".min-distance").show(),e()(".applicative-icon img").attr("src","/static/img/share/close_hollow.png")))},rulesClick:function(){this.rulesOpen=!0},backKey:function(){this.rulesOpen=!1},goShopDetail:function(){this.$router.push({name:"ShopDetails",params:{shopID:this.shopID}})},goPindouDetail:function(){this.$router.push({name:"PindouDetails",params:{groupID:this.groupID}})},goPindou:function(){var t=this;axios({method:"POST",url:"http://dev-new-api.beanpop.cn/event/groupOn",params:{groupon_id:this.groupID},withCredentials:!0,headers:{lang:"zh",token:"",os:"web",version:"1.0.0",time:"","Content-Type":"application/x-www-form-urlencoded"}}).then(function(i){var s=i.data.data,a=i.data.code;t.payID=s.id,t.payAmount=s.amount,t.payPackageName=s.priductName,t.payShopName=s.shopName,t.payRule=s.rule,console.log(s),410==a?t.$router.push({name:"Login"}):200==a&&t.$router.push({name:"PayDeposit",params:{payID:t.payID,payAmount:t.payAmount,payPackageName:t.payPackageName,payShopName:t.payShopName,payRule:t.payRule}})}).catch(function(t){console.log(t)})}}},c={render:function(){var t=this,i=t.$createElement,s=t._self._c||i;return s("div",{staticClass:"content"},[t.rulesOpen?s("div",{staticClass:"terms-div-wrapper"},[s("div",{staticClass:"terms-div-header"},[s("div",{staticClass:"header-title-wrapper"},[t._v("\n\t\t\t"+t._s(t.$t("pddrule"))+"\n\t\t")]),t._v(" "),s("div",{staticClass:"header-back-wrapper",on:{click:t.backKey}},[t._m(0)])]),t._v(" "),t._m(1)]):t._e(),t._v(" "),s("div",{staticClass:"fixed-right-btn",on:{click:function(i){t.openApp(t.phoneKind)}}},[t._v("打开App")]),t._v(" "),s("div",{staticClass:"main-top"},[s("div",{staticClass:"main-top-title"},[s("img",{attrs:{src:"/static/img/share/rule.png",alt:""},on:{click:t.rulesClick}}),t._v(" "),s("span",[t._v(t._s(t.groupStatusDesc))])]),t._v(" "),t.pinIng?s("div",{staticClass:"finish-time"},[s("span",[t._v("22:33:44.0")]),t._v(" "),s("span",{staticClass:"orange"},[t._v("后结束")])]):t._e(),t._v(" "),s("div",{staticClass:"pin-success-box"},[s("div",{staticClass:"user-joined justified"},[s("div",{staticClass:"pindou-partner"},[s("div",{staticClass:"avatar"},[s("img",{attrs:{src:t.ownerAvatar}})]),t._v(" "),t._m(2)])]),t._v(" "),s("div",{staticClass:"join-pindou-desc"},[s("div",{staticClass:"times"},[s("span",[t._v("发起时间：")]),t._v(" "),s("span",[t._v(t._s(t.groupCreateAt))])]),t._v(" "),t.pinSuccess?s("div",{staticClass:"times"},[s("span",[t._v("成功时间：")]),t._v(" "),s("span",[t._v(t._s(t.groupSuccessAt))])]):t._e(),t._v(" "),t.pinSuccess||t.pinIng?t._e():s("div",{staticClass:"times"},[s("span",[t._v("失败时间：")]),t._v(" "),s("span",[t._v(t._s(t.groupExpriedAt))])]),t._v(" "),t.pinIng?s("div",{staticClass:"group-info"},[s("span",{staticClass:"orange"},[t._v(t._s(t.pinzhu))]),t._v(" "),s("span",{staticClass:"grey"},[t._v("发起的拼豆豆还差")]),t._v(" "),s("span",{staticClass:"orange"},[t._v("3人")]),t._v(" "),s("span",{staticClass:"grey"},[t._v("，即可获得优惠 ")])]):t._e()])])]),t._v(" "),s("div",{staticClass:"pindou-details"},[s("div",{staticClass:"pindou-details-top",on:{click:t.goShopDetail}},[t._v(t._s(t.shopName))]),t._v(" "),s("div",{staticClass:"pindou-details-middle",on:{click:t.goPindouDetail}},[s("div",{staticClass:"middle-left"},[s("img",{attrs:{src:t.shopImage,alt:""}})]),t._v(" "),s("div",{staticClass:"middle-right"},[s("div",{staticClass:"package-name"},[t._v(t._s(t.groupName))]),t._v(" "),s("div",{staticClass:"right-second-div clear-fix"},[s("div",{staticClass:"owner-box"},[t._v("拼主")]),t._v(" "),s("div",{staticClass:"new-package-price"},[t._v("￥"+t._s(t.discountPrice))])]),t._v(" "),s("div",{staticClass:"right-third-div clear-fix"},[s("div",{staticClass:"really-price-box"},[s("span",[t._v("到店使用仍需支付：")]),t._v(" "),s("span",[t._v("￥"+t._s(t.newPrice))])]),t._v(" "),s("div",{staticClass:"old-package-price"},[s("del",[t._v("￥"+t._s(t.oldPrice))])])])])]),t._v(" "),s("div",{staticClass:"pindou-details-bottom"},[t.pinSuccess?s("div",[s("span",[t._v("使用期限：")]),t._v(" "),s("span",[t._v(t._s(t.startUseTime))]),t._v(" "),s("span",[t._v("至")]),t._v(" "),s("span",[t._v(t._s(t.endUseTime))])]):t._e()])]),t._v(" "),s("div",{staticClass:"must-know justified",on:{click:t.showMustKnow}},[s("span",{staticClass:"must-know-text"},[t._v("使用须知")]),t._v(" "),t._m(3)]),t._v(" "),s("div",{staticClass:"must-know-contain"}),t._v(" "),s("div",{staticClass:"applicative justified",on:{click:t.showApplicative}},[s("div",{staticClass:"applicative-text"},[t._v("适用门店")]),t._v(" "),s("div",{staticClass:"applicative-icon justified"},[s("div",{staticClass:"min-distance"},[s("span",[t._v("最近门店"+t._s(t.minDistance)+"米")])]),t._v(" "),s("div",{staticClass:"shop-count"},[s("span",[t._v("共"+t._s(t.shopCount)+"家门店")])]),t._v(" "),s("img",{attrs:{src:"/static/img/share/close_hollow.png"}})])]),t._v(" "),s("div",{staticClass:"applicative-contain"}),t._v(" "),s("div",{staticClass:"goto-pindou",on:{click:t.goPindou}},[s("span",[t._v("去拼豆")])])])},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"header-back-arrow"},[i("img",{attrs:{src:"/static/img/icon/goback.png"}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"terms-div-contents"},[i("iframe",{attrs:{src:"https://www.beanpop.cn/pddrule",width:"100%",height:"100%",frameborder:"0",name:"_blank",id:"_blank"}})])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"owner"},[i("img",{attrs:{src:"/static/img/share/pindou-owner.png"}}),this._v(" "),i("div",{staticClass:"owner-text"},[this._v("拼主")])])},function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"must-know-icon"},[i("img",{attrs:{src:"/static/img/share/close_hollow.png"}})])}]};var p=s("VU/8")(o,c,!1,function(t){s("OYNL")},"data-v-b5da0634",null);i.default=p.exports},OYNL:function(t,i){}});