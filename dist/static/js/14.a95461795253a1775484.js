webpackJsonp([14],{"/BnH":function(i,t){},KdDB:function(i,t,e){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=e("7+uW"),a=e("TXmL"),n=e("K/Lq"),o=e.n(n),r=e("mtWM"),d=e.n(r),c=e("4kSj"),p=e.n(c),l=e("7QTg"),v=e("8wSn");s.a.use(a.a);var u={name:"pindouDetails",i18n:new a.a({locale:"pindouDetails",groupID:"",messages:v}),components:{swiper:l.swiper,swiperSlide:l.swiperSlide},data:function(){return{bannerItems:[],packageName:"",packagePrice:"",packageDesc:"",newPackagePrice:"",groupSize:"",joinNumber:"",groupOnNumber:"",shopName:"",shopAddress:"",shopAddressDetail:"",shopPhoneNum:"",groupID:"",moreData:!1,clearTimer:"",clearMoreTimer:[],allTimer:[],swiperOption:{autoplay:!0,pagination:{el:".swiper-pagination",clickable:!0},centeredSlides:!0,loop:!0}}},created:function(){var i=this;p()("body").css({"background-color":"#F4F4F4","font-family":"PingFangSC-Regular","font-size":"16px"});var t=this.$route.params,e=this;t.groupID?this.groupID=t.groupID:this.groupID=o.a.get("group_id"),d()({method:"GET",url:"http://dev-new-api.beanpop.cn/event/groupOn/"+this.groupID,headers:{lang:"zh",token:"",os:"web",version:"1.0.0",time:""}}).then(function(t){var e=t.data.data;o.a.set("group_id",i.groupID,1),i.$i18n.groupID=o.a.get("group_id"),i.bannerItems=e.banner,i.packageName=e.title,i.packagePrice="￥"+e.price,i.newPackagePrice="￥"+e.discountedPrice,i.groupSize=e.groupSize,i.joinNumber=e.joinNumber,i.packageDesc=i.groupSize+"人成团·"+i.joinNumber+"人已拼",i.groupOnNumber=e.groupOnNumber;var s=e.shop;i.shopName=s.name,i.shopAddress=s.addressDetail,i.shopAddressDetail=s.nearAddress,i.shopPhoneNum=s.phoneNum;for(var a=e.goods,n=0;n<a.length;n++){var r="·"+a[n].name,c="（"+a[n].number+"份）",l="￥"+a[n].price;p()(".selected-food").append('<div class="food-details justified"><span><span class="food-name"></span><span class="food-amount"></span></span><span class="price"></span></div>'),p()(".selected-food .food-details:eq("+n+") .food-name").text(r),p()(".selected-food .food-details:eq("+n+") .food-amount").text(c),p()(".selected-food .food-details:eq("+n+") .price").text(l)}var v=e.remark;p()(".pindou-remarks-content").append(v);for(var u=e.tips,m=0;m<u.length;m++){var g=u[m].title,h=u[m].value;p()(".tips-content").append('<div class="tips-content-title"></div><div class="tips-content-text"></div>'),p()(".tips-content .tips-content-title:eq("+m+")").text(g),p()(".tips-content .tips-content-text:eq("+m+")").text(h)}for(var f=e.groupOn,_=i,C=function(t){k=""==f[t].iamge||null==f[t].image?"/static/img/share/no-image.png":f[t].image,w=f[t].id,x=f[t].nickname,j=f[t].needNum+"人",I=f[t].timeLeft,p()(".pindouing").append('<div class="pindou-box justified"><div class="user-info"><img/><span class="user-name"></span></div><div class="pindou-right justified"><div class="pindou-info"><span>还差</span><span class="lack-people"></span><span>拼成</span><p></p></div><div class="go-pindou" data-groupid=""><span>去拼豆</span></div></div></div>'),p()(".pindouing .pindou-box:eq("+t+") .go-pindou").attr("data-groupid",w),p()(".pindouing .pindou-box:eq("+t+") img").attr("src",k),p()(".pindouing .pindou-box:eq("+t+") .user-name").text(x),p()(".pindouing .pindou-box:eq("+t+") .lack-people").text(j),p()(".pindouing .pindou-box:eq("+t+") .pindou-info p").text(i.timer(I)),function(i){var e=setInterval(function(){i--,p()(".pindouing .pindou-box:eq("+t+") .pindou-info p").text(_.timer(i))},1e3);_.allTimer.push(e)}(I)},b=0;b<f.length;b++){var k,w,x,j,I;C(b)}p()(".go-pindou").click(function(){_.$options.methods.goToPindou();var i=p()(this).attr("data-groupid");d()({method:"GET",url:"http://dev-new-api.beanpop.cn/event/beforeGroupOn/"+i,withCredentials:!0,headers:{lang:"zh",token:"",os:"web",version:"1.0.0",time:""}}).then(function(i){var t=i.data.data,e=t.ownerName,s=t.needNum,a=t.timeLeft;p()(".join-pindou-box .join-pindou-desc .orange:eq(1)").text(_.timer(a)),function(i){_.clearTimer=setInterval(function(){i--,p()(".join-pindou-box .join-pindou-desc .orange:eq(1)").text(_.timer(i))},1e3),_.allTimer.push(_.clearTimer)}(a);var n=t.user,o=t.groupSize,r='<div class="pindou-partner"><div class="avatar"><img/></div></div>';p()(".join-pindou-box .join-pindou-title").text("参与"+e+"的拼豆豆单"),p()(".join-pindou-box .join-pindou-desc .orange:eq(0)").text(s+"个"),p()(".user-joined").append('<div class="pindou-partner"><div class="avatar"><img/></div><div class="owner"><img src="/static/img/share/pindou-owner.png"/><div class="owner-text">拼主</div></div></div>'),setTimeout(function(){for(var i=0;i<n.length;i++){i>=1&&p()(".user-joined").append(r);var t=n[i].image;null!=t&&""!=t||(t="/static/img/share/pindou-wait.png"),p()(".user-joined .avatar:eq("+i+") img").attr("src",t)}for(var e=n.length;e<o;e++){p()(".user-joined").append(r);p()(".user-joined .avatar:eq("+e+") img").attr("src","/static/img/share/pindou-wait.png")}},1)}).catch(function(i){console.log(i)})});var q=e.ownerGot;p()(".award").append(q)}).catch(function(i){console.log(i)}),p()(window).on("unload",function(){e.clearAllTimer(e.allTimer)}),window.onpopstate=function(){e.clearAllTimer(e.allTimer)}},methods:{goToPindou:function(){var i=p()(window).height();p()(".mask1, .mask2").height(i+100),p()(".join-pindou-box, .mask2").show(),p()(".initiate-box").hide()},closePindou:function(i){p()(".join-pindou-box, .mask2").hide(),p()(".initiate-box").show(),clearInterval(i),p()(".user-joined").empty()},signPindou:function(){var i=p()(window).height();p()(".mask1, .mask2").height(i+100),p()(".initiate-failed-box, .mask2").show(),p()(".initiate-box").hide()},closeSign:function(){p()(".initiate-failed-box, .mask2").hide(),p()(".initiate-box").show()},joinOther:function(){p()(".initiate-failed-box, .mask2").hide(),p()(".initiate-box").show(),p()("html,body").animate({scrollTop:p()(".pindouing").offset().top},500)},showAward:function(){var i=p()(window).height();p()(".mask1, .mask2").height(i+100),p()(".award, .mask1").show()},closeAward:function(){p()(".award, .mask1").hide()},callShop:function(){var i="tel:"+this.shopPhoneNum;window.location.href=i},goBack:function(i){this.moreData=!1;for(var t=0;t<i.length;t++)clearInterval(i[t]);i.length=0},timer:function(i){var t=parseInt(i%60)<10?"0"+parseInt(i%60):parseInt(i%60),e=parseInt(i/60%60)<10?"0"+parseInt(i/60%60):parseInt(i/60%60),s=parseInt(i/3600%24)<10?"0"+parseInt(i/3600%24):parseInt(i/3600%24);return(Math.floor(i/86400)>=1?Math.floor(i/86400):"")+":"+s+":"+e+":"+t},clearAllTimer:function(i){for(var t=0;t<i.length;t++)clearInterval(i[t])},morePindou:function(){var i=this;this.moreData=!0,d()({method:"GET",url:"http://dev-new-api.beanpop.cn/event/groupOnList/"+this.groupID,withCredentials:!0,headers:{lang:"zh",token:"",os:"web",version:"1.0.0",time:""}}).then(function(t){for(var e=t.data.data,s=function(t){n=""==e[t].iamge||null==e[t].image?"/static/img/share/no-image.png":e[t].image,o=e[t].id,r=e[t].nickname,d=e[t].needNum+"人",c=e[t].timeLeft,l=i,p()(".terms-div-contents").append('<div class="pindou-box justified"><div class="user-info"><span class="user-name"></span><img/></div><div class="pindou-right justified"><div class="pindou-info"><span>还差</span><span class="lack-people"></span><span>拼成</span><p></p></div><div class="go-pindou" data-groupid=""><span>去拼豆</span></div></div></div>'),p()(".terms-div-contents .pindou-box:eq("+t+") .go-pindou").attr("data-groupid",o),p()(".terms-div-contents .pindou-box:eq("+t+") img").attr("src",n),p()(".terms-div-contents .pindou-box:eq("+t+") .user-name").text(r),p()(".terms-div-contents .pindou-box:eq("+t+") .lack-people").text(d),p()(".terms-div-contents .pindou-box:eq("+t+") .pindou-info p").text(i.$options.methods.timer(c)),function(i){var e=setInterval(function(){i--,p()(".terms-div-contents .pindou-box:eq("+t+") .pindou-info p").text(l.$options.methods.timer(i))},1e3);l.clearMoreTimer.push(e),l.allTimer.push(e)}(c)},a=0;a<e.length;a++){var n,o,r,d,c,l;s(a)}}).catch(function(i){console.log(i)})}}},m={render:function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"content"},[i.moreData?e("div",{staticClass:"terms-div-wrapper"},[e("div",{staticClass:"terms-div-header"},[e("div",{staticClass:"header-title-wrapper"},[i._v("更多拼豆豆")]),i._v(" "),e("div",{staticClass:"header-back-wrapper",on:{click:function(t){i.goBack(i.clearMoreTimer)}}},[i._m(0)])]),i._v(" "),e("div",{staticClass:"terms-div-contents"})]):i._e(),i._v(" "),e("swiper",{attrs:{options:i.swiperOption}},[i._l(i.bannerItems,function(i){return e("swiper-slide",{key:i.index,staticClass:"swiper-div"},[e("img",{attrs:{src:i.image,alt:""}})])}),i._v(" "),e("div",{staticClass:"swiper-pagination",attrs:{slot:"pagination"},slot:"pagination"})],2),i._v(" "),e("div",{staticClass:"fixed-right-btn"},[i._v("打开App")]),i._v(" "),e("div",{staticClass:"package"},[e("div",{staticClass:"package-top justified"},[e("div",{staticClass:"package-name"},[i._v(i._s(i.packageName))]),i._v(" "),e("div",{staticClass:"new-price"},[i._v(i._s(i.newPackagePrice))])]),i._v(" "),e("div",{staticClass:"package-bottom justified"},[e("div",{staticClass:"package-desc"},[i._v(i._s(i.packageDesc))]),i._v(" "),e("div",{staticClass:"old-price"},[e("del",[i._v(i._s(i.packagePrice))])])])]),i._v(" "),i._m(1),i._v(" "),i._m(2),i._v(" "),e("div",{staticClass:"shop-info"},[e("div",{staticClass:"shop-info-title"},[i._v(i._s(i.shopName))]),i._v(" "),e("div",{staticClass:"location-info justified"},[e("div",{staticClass:"location justified"},[i._m(3),i._v(" "),e("div",{staticClass:"address"},[e("span",[i._v(i._s(i.shopAddress))]),i._v(" "),e("p",[i._v(i._s(i.shopAddressDetail))])])]),i._v(" "),e("div",{staticClass:"contact-box",on:{click:i.callShop}},[e("img",{attrs:{src:"/static/img/share/contact.png"}})])])]),i._v(" "),e("div",{staticClass:"pindouing-title"},[e("span",{staticClass:"people-count"},[i._v(i._s(i.groupOnNumber)+"人")]),i._v(" "),e("span",[i._v("正在拼豆豆")]),i._v(" "),e("span",{staticClass:"more-pindou",on:{click:i.morePindou}},[i._v("查看更多")])]),i._v(" "),e("div",{staticClass:"pindouing"}),i._v(" "),e("div",{staticClass:"initiate-failed-box"},[e("div",{staticClass:"initiate-failed"},[e("div",{staticClass:"initiate-failed-title"},[i._v("您还没资格成为拼主哦！")]),i._v(" "),e("div",{staticClass:"get-qualifications"},[i._v("您可以去购买带有喜豆码商品后获得发起资格，享更多优惠或参与其他拼主已发起的拼豆豆。")]),i._v(" "),e("div",{staticClass:"join-other-btn",on:{click:i.joinOther}},[e("span",[i._v("参与其他拼豆豆")])])]),i._v(" "),e("div",{staticClass:"close-join-other",on:{click:i.closeSign}},[e("img",{attrs:{src:"/static/img/share/close.png",alt:""}})])]),i._v(" "),e("div",{staticClass:"join-pindou-box"},[i._m(4),i._v(" "),e("div",{staticClass:"close-join-pindou",on:{click:function(t){i.closePindou(i.clearTimer)}}},[e("img",{attrs:{src:"/static/img/share/close.png",alt:""}})])]),i._v(" "),e("div",{staticClass:"mask1",on:{click:i.closeAward}}),i._v(" "),e("div",{staticClass:"mask2"}),i._v(" "),i._m(5),i._v(" "),e("div",{staticClass:"initiate-box"},[e("div",{staticClass:"initiate-left"},[i._m(6),i._v(" "),e("span",{staticClass:"initiate-remark"},[i._v("拼主拼团成功将获得额外奖励")]),i._v(" "),e("img",{staticClass:"pindou-question",attrs:{src:"/static/img/share/question.png"},on:{click:i.showAward}})]),i._v(" "),e("div",{staticClass:"initiate-btn",on:{click:i.signPindou}},[e("span",[i._v("发起拼豆豆")])])])],1)},staticRenderFns:[function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"header-back-arrow"},[t("img",{attrs:{src:"/static/img/icon/goback.png"}})])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"pindou-content"},[t("div",{staticClass:"pindou-titlt"},[this._v("拼豆豆内容")]),this._v(" "),t("div",{staticClass:"selected-food"}),this._v(" "),t("div",{staticClass:"pindou-remarks"},[t("div",{staticClass:"pindou-remarks-title"},[this._v("备注")]),this._v(" "),t("div",{staticClass:"pindou-remarks-content"})])])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"tips"},[t("div",{staticClass:"tips-title"},[this._v("温馨提示")]),this._v(" "),t("div",{staticClass:"tips-content"})])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"location-icon"},[t("img",{attrs:{src:"/static/img/share/position.png"}})])},function(){var i=this,t=i.$createElement,e=i._self._c||t;return e("div",{staticClass:"join-pindou"},[e("div",{staticClass:"join-pindou-title"}),i._v(" "),e("div",{staticClass:"join-pindou-desc"},[e("span",{staticClass:"grey"},[i._v("仅限")]),i._v(" "),e("span",{staticClass:"orange"}),i._v(" "),e("span",{staticClass:"grey"},[i._v("名额，")]),i._v(" "),e("span",{staticClass:"orange"}),i._v(" "),e("span",{staticClass:"grey"},[i._v("后结束")])]),i._v(" "),e("div",{staticClass:"user-joined"}),i._v(" "),e("div",{staticClass:"join-pindou-btn"},[e("span",[i._v("参与拼豆豆")])])])},function(){var i=this.$createElement,t=this._self._c||i;return t("div",{staticClass:"award"},[t("div",{staticClass:"award-title"},[this._v("拼主拼团成功额外奖励")])])},function(){var i=this.$createElement,t=this._self._c||i;return t("p",[t("span",{staticClass:"deposit"},[this._v("10元")]),t("span",[this._v("订金")])])}]};var g=e("VU/8")(u,m,!1,function(i){e("/BnH")},"data-v-45cc0fb0",null);t.default=g.exports}});