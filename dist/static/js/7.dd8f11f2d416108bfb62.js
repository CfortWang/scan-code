webpackJsonp([7],{"+ikV":function(t,e,s){var o;o=function(){"use strict";return{data:function(){return{count:0,counting:!1,endTime:0}},props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3},leadingZero:{type:Boolean,default:!0},now:{type:Function,default:function(){return Date.now()}},time:{type:Number,default:0,required:!0,validator:function(t){return t>=0}},tag:{type:String,default:"span"}},computed:{days:function(){return Math.floor(this.count/864e5)},hours:function(){return Math.floor(this.count%864e5/36e5)},minutes:function(){return Math.floor(this.count%36e5/6e4)},seconds:function(){var t=this.interval,e=this.count%6e4/1e3;return t<10?e.toFixed(3):t>=10&&t<100?e.toFixed(2):t>=100&&t<1e3?e.toFixed(1):Math.floor(e)},totalDays:function(){return this.days},totalHours:function(){return Math.floor(this.count/36e5)},totalMinutes:function(){return Math.floor(this.count/6e4)},totalSeconds:function(){return Math.floor(this.count/1e3)}},render:function(t){var e=this,s=function(t){return e.leadingZero&&t<10?"0"+t:t};return t(this.tag,this.$scopedSlots.default?[this.$scopedSlots.default({days:s(this.days),hours:s(this.hours),minutes:s(this.minutes),seconds:s(this.seconds),totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds})]:this.$slots.default)},created:function(){this.init()},mounted:function(){this.autoStart&&this.start(),window.addEventListener("focus",this.onFocus=this.update.bind(this))},beforeDestroy:function(){window.removeEventListener("focus",this.onFocus),clearTimeout(this.timeout)},watch:{time:function(){this.init()}},methods:{init:function(){var t=this.time;t>0&&(this.count=t,this.endTime=this.now()+t)},start:function(){this.counting||(this.emitEvents&&this.$emit("countdownstart"),this.counting=!0,this.step())},step:function(){var t=this;if(this.counting)if(this.emitEvents&&this.$emit("countdownprogress",{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds}),this.count>0){var e=this.interval;this.timeout=setTimeout(function(){t.count-=e,t.step()},e)}else this.count=0,this.stop()},stop:function(){this.counting=!1,this.timeout=void 0,this.emitEvents&&this.$emit("countdownend")},update:function(){this.counting&&(this.count=Math.max(0,this.endTime-this.now()))}}}},t.exports=o()},Bwmn:function(t,e){},Q7UC:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=s("4kSj"),n=s.n(o),i=s("+ikV"),r=s.n(i),a=s("8wSn");Vue.use(VueI18n);var u={name:"shareRegister",i18n:new VueI18n({locale:"shareRegister",messages:a}),components:{VueCountdown:r.a},data:function(){var t=new Date;return{countryCode:"",countrySeq:"",phoneNumber:"",password1:"",password2:"",recommendCode:"",verificationCode:"",countryItems:[],selectedCountry:1,countDown:new Date(t.getTime()+18e4)-t,phoneKind:"",type:"",from:"web"}},created:function(){var t=this;/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.phoneKind="ios":/(Android)/i.test(navigator.userAgent)&&(this.phoneKind="android"),axios({url:"http://dev-new-api.beanpop.cn/common/country"}).then(function(e){var s=e.data.data;t.countryItems=s,t.selectedCountry=parseInt(t.countryItems[0].seq)}).catch(function(t){console.log(t)})},methods:{countryChangeItem:function(t){this.selectedCountry=parseInt(t.target.value)},showMessage:function(){n()(".tip-container").fadeIn(),setTimeout(function(){n()(".tip-container").fadeOut()},1e3)},getVerification:function(){var t=this;if(this.phoneNumber=n()("#phoneNum").val(),this.type="sign_up",""===this.phoneNumber)return n()(".tip-error").text(this.$i18n.t("message.insertPhoneNum")),this.$options.methods.showMessage(),!1;if(!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber))return n()(".tip-error").text(this.$i18n.t("message.wrongPhoneNum")),this.$options.methods.showMessage(),!1;axios({method:"POST",url:"http://dev-new-api.beanpop.cn/login/sendCode",params:{phoneNumber:this.phoneNumber,country:this.selectedCountry,type:this.type},headers:{"content-type":"application/x-www-form-urlencoded",accept:"text/html"}}).then(function(e){if(200==e.data.code){var s=new Date,o=new Date(s.getTime()+18e4);t.countDown=o-s,t.$refs.countdown.init(),t.$refs.countdown.start()}}).catch(function(e){console.log(e),n()(".tip-error").text(t.$i18n.t("message.sendFail")),t.$options.methods.showMessage(),t.isCountDown=!1})},doRegister:function(){var t=this;return this.phoneNumber=n()("#phoneNum").val().replace(/ /gi,""),this.password1=n()("#pwd").val().replace(/ /gi,""),this.password2=n()("#rePwd").val().replace(/ /gi,""),this.recommendCode=n()("#recommend").val().replace(/ /gi,""),this.verificationCode=n()("#verification").val().replace(/ /gi,""),this.from="web",""===this.phoneNumber?(n()(".tip-error").text(this.$i18n.t("message.insertPhoneNum")),this.$options.methods.showMessage(),!1):""===this.verificationCode?(n()(".tip-error").text(this.$i18n.t("message.insertAuthCode")),this.$options.methods.showMessage(),!1):6!==this.verificationCode.length?(n()(".tip-error").text(this.$i18n.t("message.wrongAuthCodeSize")),this.$options.methods.showMessage(),!1):""===this.password1?(n()(".tip-error").text(this.$i18n.t("message.insertPW")),this.$options.methods.showMessage(),!1):this.password1.length<8||this.password1.length>20?(n()(".tip-error").text(this.$i18n.t("message.wrongPWSize")),this.$options.methods.showMessage(),!1):""===this.password2?(n()(".tip-error").text(this.$i18n.t("message.rePwd")),this.$options.methods.showMessage(),!1):this.password1!==this.password2?(n()(".tip-error").text(this.$i18n.t("message.differentPW")),this.$options.methods.showMessage(),!1):""!==this.recommendCode&&6!==this.recommendCode.length?(n()(".tip-error").text(this.$i18n.t("message.wrongRecommendCodeSize")),this.$options.methods.showMessage(),!1):void axios({method:"POST",url:"http://dev-new-api.beanpop.cn/login/register",params:{phoneNumber:this.phoneNumber,country:this.selectedCountry,code:this.verificationCode,mobileOs:this.phoneKind,password:this.password,recommendCode:this.recommendCode,from:this.from}}).then(function(e){var s=e.data.code,o=e.data.message;if(s>200)return n()(".tip-error").text(t.$i18n.t(o)),t.$options.methods.showMessage(),!1}).catch(function(e){console.log(e);var s=e.response.status,o=e.response.data;return console.log(s),404===s?100===o.status?(alert(t.$i18n.t("message.wrongRecommendCode")),!1):200===o.status?(alert(t.$i18n.t("message.wrongAuthCode")),!1):(console.log(e),!1):400===s?(alert(t.$i18n.t("message.wrongAuthCode")),!1):(console.log(e),!1)})}}},h={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"content"},[s("div",{staticClass:"reg-box"},[s("div",{staticClass:"phone-num-box"},[s("select",{attrs:{name:""},on:{change:function(e){t.countryChangeItem(e)}}},t._l(t.countryItems,function(e){return s("option",{key:e.index,domProps:{value:e.seq}},[t._v("+"+t._s(e.calling_code))])})),t._v(" "),s("input",{attrs:{type:"number",name:"phoneNum",id:"phoneNum",value:"",placeholder:t.$t("placeholder.phoneNum")}})]),t._v(" "),s("div",{staticClass:"verification-code-box"},[s("input",{attrs:{type:"text",name:"verification",id:"verification",value:"",placeholder:t.$t("placeholder.verification")}}),t._v(" "),s("vue-countdown",{ref:"countdown",staticClass:"count-down",attrs:{time:t.countDown,interval:1e3,"auto-start":!1},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.minutes)+":"+t._s(e.seconds))]}}])}),t._v(" "),s("button",{staticClass:"get-verification",on:{click:t.getVerification}},[t._v("获取验证码")])],1),t._v(" "),s("div",{staticClass:"password-box"},[s("input",{attrs:{type:"password",name:"pwd",id:"pwd",value:"",placeholder:t.$t("placeholder.password")}})]),t._v(" "),s("div",{staticClass:"re-password-box"},[s("input",{attrs:{type:"password",name:"",id:"rePwd",value:"",placeholder:t.$t("placeholder.rePassword")}})]),t._v(" "),s("div",{staticClass:"recommend-box"},[s("input",{attrs:{type:"text",name:"recommend",id:"recommend",value:"",placeholder:t.$t("placeholder.recommend")}})]),t._v(" "),s("div",{staticClass:"reg-success-desc"},[t._v(t._s(t.$t("regAward")))]),t._v(" "),s("div",{staticClass:"reg-btn-box",on:{click:t.doRegister}},[t._v(t._s(t.$t("ensureReg")))]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip-container"},[e("div",{staticClass:"tip-error"},[e("img",{attrs:{src:"/static/img/share/error.png"}}),this._v(" "),e("span",{staticClass:"tip-error-msg"})])])}]};var c=s("VU/8")(u,h,!1,function(t){s("Bwmn")},"data-v-a07a00fe",null);e.default=c.exports}});