webpackJsonp([9],{"+ikV":function(t,e,n){var o;o=function(){"use strict";return{data:function(){return{count:0,counting:!1,endTime:0}},props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3},leadingZero:{type:Boolean,default:!0},now:{type:Function,default:function(){return Date.now()}},time:{type:Number,default:0,required:!0,validator:function(t){return t>=0}},tag:{type:String,default:"span"}},computed:{days:function(){return Math.floor(this.count/864e5)},hours:function(){return Math.floor(this.count%864e5/36e5)},minutes:function(){return Math.floor(this.count%36e5/6e4)},seconds:function(){var t=this.interval,e=this.count%6e4/1e3;return t<10?e.toFixed(3):t>=10&&t<100?e.toFixed(2):t>=100&&t<1e3?e.toFixed(1):Math.floor(e)},totalDays:function(){return this.days},totalHours:function(){return Math.floor(this.count/36e5)},totalMinutes:function(){return Math.floor(this.count/6e4)},totalSeconds:function(){return Math.floor(this.count/1e3)}},render:function(t){var e=this,n=function(t){return e.leadingZero&&t<10?"0"+t:t};return t(this.tag,this.$scopedSlots.default?[this.$scopedSlots.default({days:n(this.days),hours:n(this.hours),minutes:n(this.minutes),seconds:n(this.seconds),totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds})]:this.$slots.default)},created:function(){this.init()},mounted:function(){this.autoStart&&this.start(),window.addEventListener("focus",this.onFocus=this.update.bind(this))},beforeDestroy:function(){window.removeEventListener("focus",this.onFocus),clearTimeout(this.timeout)},watch:{time:function(){this.init()}},methods:{init:function(){var t=this.time;t>0&&(this.count=t,this.endTime=this.now()+t)},start:function(){this.counting||(this.emitEvents&&this.$emit("countdownstart"),this.counting=!0,this.step())},step:function(){var t=this;if(this.counting)if(this.emitEvents&&this.$emit("countdownprogress",{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds}),this.count>0){var e=this.interval;this.timeout=setTimeout(function(){t.count-=e,t.step()},e)}else this.count=0,this.stop()},stop:function(){this.counting=!1,this.timeout=void 0,this.emitEvents&&this.$emit("countdownend")},update:function(){this.counting&&(this.count=Math.max(0,this.endTime-this.now()))}}}},t.exports=o()},"P+RC":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("4kSj"),i=n.n(o),s=n("+ikV"),r=n.n(s),a=n("8wSn"),u={name:"login",i18n:new VueI18n({locale:"login",messages:a}),components:{VueCountdown:r.a},data:function(){var t=new Date;return{countryCode:"",countrySeq:"",phoneNumber:"",password1:"",password2:"",recommendCode:"",verificationCode:"",countryItems:[],selectedCountry:1,countDown:new Date(t.getTime()+6e4)-t,phoneKind:"",type:""}},created:function(){var t=this;i()("body").css({"background-color":"#FFF"}),/(iPhone|iPad|iPod|iOS)/i.test(navigator.userAgent)?this.phoneKind="ios":/(Android)/i.test(navigator.userAgent)&&(this.phoneKind="android"),axios({url:"http://dev-new-api.beanpop.cn/common/country"}).then(function(e){var n=e.data.data;t.countryItems=n,t.selectedCountry=parseInt(t.countryItems[0].seq)}).catch(function(t){console.log(t)})},methods:{countryChangeItem:function(t){this.selectedCountry=parseInt(t.target.value)},showMessage:function(){i()(".tip-container").fadeIn(),setTimeout(function(){i()(".tip-container").fadeOut()},1e3)},getVerification:function(){var t=this;if(this.phoneNumber=i()("#phoneNum").val(),this.type="login",""===this.phoneNumber)return i()(".tip-error").text(this.$i18n.t("message.insertPhoneNum")),this.$options.methods.showMessage(),!1;if(!/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber))return i()(".tip-error").text(this.$i18n.t("message.wrongPhoneNum")),this.$options.methods.showMessage(),!1;axios({method:"POST",url:"http://dev-new-api.beanpop.cn/login/sendCode",params:{phoneNumber:this.phoneNumber,country:this.selectedCountry,type:this.type}}).then(function(e){var n=e.data.data;console.log(n);var o=new Date,s=new Date(o.getTime()+6e4);t.countDown=s-o,t.$refs.countdown.init(),t.$refs.countdown.start(),i()(".get-verification").attr("disabled",!0).css("color","gray"),setInterval(function(){i()(".get-verification").attr("disabled",!1).css("color","#EE6807")},6e4)}).catch(function(e){console.log(e),i()(".tip-error").text(t.$i18n.t("message.sendFail")),t.$options.methods.showMessage(),t.isCountDown=!1})},doLogin:function(){var t=this;if(this.phoneNumber=i()("#phoneNum").val().replace(/ /gi,""),this.verificationCode=i()("#verification").val().replace(/ /gi,""),""===this.phoneNumber)return i()(".tip-error").text(this.$i18n.t("message.insertPhoneNum")),this.$options.methods.showMessage(),!1;return/^(13[0-9]|14[579]|15[0-3,5-9]|16[6]|17[0135678]|18[0-9]|19[89])\d{8}$/.test(this.phoneNumber)?""===this.verificationCode?(i()(".tip-error").text(this.$i18n.t("message.insertAuthCode")),this.$options.methods.showMessage(),!1):6!==this.verificationCode.length?(i()(".tip-error").text(this.$i18n.t("message.wrongAuthCodeSize")),this.$options.methods.showMessage(),!1):void axios({method:"POST",url:"http://dev-new-api.beanpop.cn/login/code",params:{phoneNumber:this.phoneNumber,country:this.selectedCountry,code:this.verificationCode,mobileOs:"web"},withCredentials:!0,headers:{lang:"zh",token:"",os:"web",version:"1.0.0",time:"","Content-Type":"application/x-www-form-urlencoded"}}).then(function(e){var n=e.data.message;if(e.data.code>200)return i()(".tip-error").text(t.$i18n.t(n)),t.$options.methods.showMessage(),!1;t.$router.push({name:"SpellBean"})}).catch(function(t){}):(i()(".tip-error").text(this.$i18n.t("message.wrongPhoneNum")),this.$options.methods.showMessage(),!1)}}},c={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content"},[n("div",{staticClass:"login-box"},[n("div",{staticClass:"phone-num-box"},[n("select",{attrs:{name:""},on:{change:function(e){t.countryChangeItem(e)}}},t._l(t.countryItems,function(e){return n("option",{key:e.index,domProps:{value:e.seq}},[t._v("+"+t._s(e.calling_code))])})),t._v(" "),n("input",{attrs:{type:"number",name:"phoneNum",id:"phoneNum",value:"",placeholder:t.$t("placeholder.phoneNum")}})]),t._v(" "),n("div",{staticClass:"verification-code-box"},[n("input",{attrs:{type:"text",name:"verification",id:"verification",value:"",placeholder:t.$t("placeholder.verification")}}),t._v(" "),n("vue-countdown",{ref:"countdown",staticClass:"count-down",attrs:{time:t.countDown,interval:1e3,"auto-start":!1},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.minutes)+":"+t._s(e.seconds))]}}])}),t._v(" "),n("button",{staticClass:"get-verification",on:{click:t.getVerification}},[t._v("获取验证码")])],1),t._v(" "),n("div",{staticClass:"login-btn-box",on:{click:t.doLogin}},[t._v(t._s(t.$t("login")))]),t._v(" "),t._m(0)])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"tip-container"},[e("div",{staticClass:"tip-error"},[e("img",{attrs:{src:"/static/img/share/error.png"}}),this._v(" "),e("span",{staticClass:"tip-error-msg"})])])}]};var h=n("VU/8")(u,c,!1,function(t){n("c8As")},"data-v-305a4e4c",null);e.default=h.exports},c8As:function(t,e){}});